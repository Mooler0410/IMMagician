<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="img/favicon.ico">

    <title>Mock3D</title>

    <!-- Google font -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet"> <!--have bootstrap.min.css-->
    <link href="css/offcanvas.css" rel="stylesheet">
    <link href="css/bootstrap-slider.css" rel="stylesheet">
    <link href="css/jquery.minicolors.css" rel="stylesheet">


    <!-- Custom styles for this template -->
    <link href="css/mock3d.css" rel="stylesheet">

    <script id="vertex-shader" type="x-shader/x-vertex">
        #define max_lights 14

        attribute vec4 vColor; //new 
        attribute vec4 vPosition;   
        attribute vec3 vNormal;
        attribute vec2 texcoord;

        varying vec4 fColor; //new
        varying vec2 f_texcoord;
        varying vec3 fNormal;

        varying vec3 pLight[max_lights];
        varying float lightN;// = lightNum
        varying vec2 mouseXYcopy;

        uniform float lightNum;
        uniform vec2 mouseXY[max_lights];
        uniform float pointLightDis[max_lights];


        void main()
        {

            gl_Position = vPosition; //Basic Requirement of Vertex. 

            vec4 transformedNormal = vec4(vNormal, 1.0) /* + vec4(0.0, 0.0, 0.5, 0.0) */;
            fNormal = normalize(transformedNormal.xyz);

            // Create lights
            for (int i = 0; i < max_lights; i++)
            {
                if (float(i)< float(lightNum))
                {
                    float rotate_costheta = (- mouseXY[i].x + 0.5) * 1.0;
                    float x = 10. * pointLightDis[i] * rotate_costheta;
                    float y = 10. * pointLightDis[i] * sqrt(1.0 - rotate_costheta * rotate_costheta);
                    float z = 10. * pointLightDis[i] * (0.5 - mouseXY[i].y);
                    pLight[i] = vec3(x, y, z);  //new like the direction of the light. 
                } else {
                    break;
                }
            }
            mouseXYcopy = mouseXY[0];
            lightN = lightNum;
            f_texcoord = texcoord;
            fColor = vColor;   //new 
        }
    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
        #define max_lights 14
        #define max_planes 3
        #define max_spheres 5
        #define max_quadrics 5
        #define PI 3.1415

        precision mediump float;

        varying vec4 fColor;
        varying vec2 f_texcoord;
        varying vec3 fNormal;//(0,0,1)

        varying float lightN;

        varying vec3 pLight[max_lights];

        varying vec2 mouseXYcopy;
        uniform vec2 mouseXYcamera;
        uniform vec2 mouseXYview;

        uniform sampler2D uSamplerColor0, uSamplerColor1, uSamplerNormal, uSamplerForeground, uSamplerBackground, uSamplerAlpha;

        uniform int currentLight;

        uniform bool lightsOnly;
        uniform bool smoothStep;
        uniform bool centerView;

        uniform vec3 lightColor[max_lights];
        uniform float lightIntensity[max_lights];
        uniform float pointLightDecay[max_lights];

        uniform bool showDiffuse[max_lights];
        uniform bool showSpec[max_lights];

        uniform float styleBright, styleDark;
        uniform float alphaR, alphaG, alphaB;
        uniform float logIOR, BGdis;

        uniform float FGdis;

        uniform int reflMap;// 1: plane, 2:hemisphere
        uniform float FGshiftX;
        uniform float FGshiftY;
        uniform float FGscaleX;
        uniform float FGscaleY;
        uniform bool transposeImage; // Transpose image

        uniform float fresnelIntensity;
        uniform float fresnelB;
        uniform float fresnelC;
        uniform bool checkFresnel;
        uniform bool realFresnel;

        uniform float cameraDis;
        uniform float cameraTilt;


        vec4 normal()
        {
            //             vec4 texture2D(sampler2D sampler, vec2 coord)
            //             vec4 texture2D(sampler2D sampler, vec2 coord, float bias)
            //             sampler specifies the sampler to which the texture from which texels will be retrieved is bound.
            //            coord specifies the texture coordinates at which texture will be sampled.
            //          bias specifies an optional bias to be applied during level-of-detail computation.
            vec4 normalMap = texture2D(uSamplerNormal, vec2(f_texcoord.s, f_texcoord.t));
            vec3 normalDisplace = normalMap.rgb;
            normalDisplace = 2.0*normalDisplace - 1.0;
            normalDisplace = normalize(normalDisplace);
            return vec4(normalize(fNormal + normalDisplace), normalMap.a);
        }

        vec4 diffuse(vec3 n, vec3 currentP)
        {

//            vec3 currentP = vec3(f_texcoord.s - 0.5, f_texcoord.t-0.5, 0.0);


            vec4 color = vec4(0, 0, 0, 1);
            float lightWeight = 0.0;

            for (int i = 0; i < max_lights; i++)
            {
                if (float(i)< float(lightN))
                {
                    vec3 vLight = normalize(pLight[i] - currentP);
                    //float cosTheta = max( dot(n, vLight), 0.0);
                    float cosTheta = (dot(n, vLight) + 1.0)/2.0;
                    float t = (cosTheta - styleDark) / (styleBright - styleDark);
                    if (t>1.0) t=1.0; if (t<0.0) t=0.0;
                    if (smoothStep)
                    {
                        t = t * t * (3.0 - 2.0 * t);
                    }
                    if (showDiffuse[i])
                    {
                        float dis = length(pLight[i] - currentP);

                        color += (1.0 - t) * vec4(lightColor[i], 1.0) * lightIntensity[i];// / ( 1.0 + pointLightDecay[i] * dis *4.0);
                        lightWeight+=lightIntensity[i];
                    };

                } else {
                    break;
                }
            }

            vec4 T = color;//lightWeight;

            vec4 c0 = texture2D(uSamplerColor0, vec2(f_texcoord.s, f_texcoord.t));//dark
            vec4 c1 = texture2D(uSamplerColor1, vec2(f_texcoord.s, f_texcoord.t));//bright

            vec4 colorFinal = c0 * (1.0 - T) + c1 * T;

            if (lightsOnly)
            {
                return T;
            } else {
                return colorFinal;
            }


        }

        vec3 alphaControl()
        {
            vec4 alphaMap = texture2D(uSamplerAlpha, vec2(f_texcoord.s, f_texcoord.t));
            return alphaMap.rgb;
        }

        vec3 spec(vec3 n, vec3 npe, vec3 ph)
        {
            vec3 finalSpec = vec3(0.0, 0.0, 0.0);

            for (int i = 0; i < max_lights; i++)
            {
                if (float(i)< float(lightN))
                {
                    vec3 vLight = normalize(pLight[i] - ph);
                    if (showSpec[i])
                    {
                        vec3 specColor = lightColor[i];
                        vec3 RVector = - vLight + 2.0 * dot(n, vLight) * n;
                        float temp = dot(RVector, - npe);
                        if (temp < 0.0) temp = 0.0;
                        float spec = pow(temp, 20.);
                        finalSpec += specColor * spec;
                    }
                } else {
                    break;
                }
            }

            return finalSpec;
        }

        //Reflected texture is treated as ultimate plane.
        vec3 reflect1(vec3 n)
        {

            float reflectIntensity = 1.0;
            vec3 reflect = - 1.0 * vec3(0.0, 0.0, 1.0) + 2.0 * dot(n, vec3(0.0, 0.0, 1.0)) * n;
            vec2 reflCoord = f_texcoord + (reflect.xy / reflect.z) * FGdis + vec2(-mouseXYcopy.x * 0.5, mouseXYcopy.y * 0.5);//+ vLight0.xy ;
            vec2 v = (reflCoord - vec2(0.5, 0.5)) / 0.5;
            reflCoord.x = v.x * (1.0 - FGscaleX) - FGshiftX + 0.5;
            reflCoord.y = v.y * (1.0 - FGscaleY) - FGshiftY + 0.5;
            if (transposeImage)
            {
                reflCoord.x = 1.0 - reflCoord.x;
                reflCoord.y = 1.0 - reflCoord.y;
            }
            if (reflCoord.x > 1.0 || reflCoord.x < 0.0)
            {
                reflCoord.x = reflCoord.x - float(floor(reflCoord.x));
                if (floor(reflCoord.x) / 2.0 == 0.0)
                {
                    reflCoord.x = 1.0 - reflCoord.x;
                }
            }
            if (reflCoord.y > 1.0 || reflCoord.y < 0.0)
            {
                reflCoord.y = reflCoord.y - float(floor(reflCoord.y));
                if (floor(reflCoord.y) / 2.0 == 0.0)
                {
                    reflCoord.y = 1.0 - reflCoord.y;
                }
            }
            vec4 reflColor = texture2D(uSamplerForeground, reflCoord);

            if (checkFresnel)
            {
                reflColor = vec4(1.0, 1.0, 1.0, 1.0);
            }
            return reflColor.rgb * reflectIntensity;
        }


        // vec3 reflect1(vec3 n)
        // {

        //     float reflectIntensity = 1.0;


        //     float s = logIOR;
        //     vec3 l = vec3(0,0,-1);//eye ray
        //     vec3 temp =  cross (-n, l);
        //     vec3 Vsurface = cross (temp, -n) ;
        //     vec3 reflect;
        //     vec3 origReflect = - 1.0 * vec3(0.0, 0.0, 1.0) + 2.0 * dot(n, vec3(0.0, 0.0, 1.0)) * n;

        //     if ( s >= 0.0 ) reflect = origReflect * (1.0 - (-s)) + (n) * (-s);
        //     if ( s < 0.0 ) reflect = origReflect * (1.0 - (s) ) + Vsurface * ( s);


        //     vec2 reflCoord = f_texcoord + (reflect.xy / reflect.z) * FGdis + vec2( -mouseXYcopy[0].x * 0.5, mouseXYcopy[0].y * 0.5) ;//+ vLight0.xy ;
        //     vec2 v = (reflCoord - vec2(0.5, 0.5)) / 0.5;
        //         reflCoord.x = v.x * ( 1.0 - FGscaleX ) - FGshiftX + 0.5;
        //         reflCoord.y = v.y * ( 1.0 - FGscaleY ) - FGshiftY + 0.5;
        //         if (reflCoord.x > 1.0 || reflCoord.x < 0.0)
        //         {
        //             reflCoord.x = reflCoord.x - float(floor(reflCoord.x));
        //             if ( floor(reflCoord.x) / 2.0 == 0.0)
        //             {
        //                 reflCoord.x = 1.0 - reflCoord.x;
        //             }
        //         }
        //         if (reflCoord.y > 1.0 || reflCoord.y < 0.0)
        //         {
        //             reflCoord.y = reflCoord.y - float(floor(reflCoord.y));
        //             if ( floor(reflCoord.y) / 2.0 == 0.0)
        //             {
        //                 reflCoord.y = 1.0 - reflCoord.y;
        //             }
        //         }
        //     vec4 reflColor = texture2D(uSamplerForeground, reflCoord) ;

        //     if (checkFresnel )
        //     {
        //         reflColor = vec4(1.0,1.0,1.0,1.0);
        //     }
        //     return reflColor.rgb * reflectIntensity;
        // }


        // Reflected texture is treated as if it is on a hemisphere 1 unit
        // away from the surface.
        vec3 reflect2(vec3 n)
        {

            float reflectIntensity = 1.0;
            vec2 reflCoord = f_texcoord + n.xy/n.z * FGdis + vec2(-mouseXYcopy.x * 0.5, mouseXYcopy.y * 0.5);
            vec2 v = (reflCoord - vec2(0.5, 0.5)) / 0.5;
            reflCoord.x = v.x * (1.0 - FGscaleX) - FGshiftX +0.5;
            reflCoord.y = v.y * (1.0 - FGscaleY) - FGshiftY + 0.5;
            if (transposeImage)
            {
                reflCoord.x = 1.0 - reflCoord.x;
                reflCoord.y = 1.0 - reflCoord.y;
            }
            if (reflCoord.x > 1.0 || reflCoord.x < 0.0)
            {
                reflCoord.x = reflCoord.x - float(floor(reflCoord.x));
                if (floor(reflCoord.x) / 2.0 == 0.0)
                {
                    reflCoord.x = 1.0 - reflCoord.x;
                }
            }
            if (reflCoord.y > 1.0 || reflCoord.y < 0.0)
            {
                reflCoord.y = reflCoord.y - float(floor(reflCoord.y));
                if (floor(reflCoord.y) / 2.0 == 0.0)
                {
                    reflCoord.y = 1.0 - reflCoord.y;
                }
            }

            vec4 reflColor = texture2D(uSamplerForeground, reflCoord);
            if (checkFresnel)
            {
                reflColor = vec4(1.0, 1.0, 1.0, 1.0);
            }

            return reflColor.rgb * reflectIntensity;
        }





        vec3 refract2(vec3 n)// Photorealistic equation
        {
            float refractIntensity = 1.0;
            float ior = pow(2.0, logIOR);
            float cos1 = dot(n, vec3(0, 0, 1.0));//vLight
            float cos2 = sqrt(1.0 + ior * ior * ((cos1 * cos1) - 1.0));
            vec3 refract = -1.0 * ior * vec3(0, 0, 1.0) + (ior * cos1 - cos2) * n;// vec3(0,0,1) -> vLight
            vec2 refrCoord = f_texcoord + (refract.xy / refract.z) * (2.0 * BGdis);
            vec4 refrColor = texture2D(uSamplerBackground, refrCoord);
            if (checkFresnel == true)
            {
                refrColor = vec4(0, 0, 0, 1.0);
            }
            return refrColor.rgb * refractIntensity;
        }

        vec3 refract(vec3 n)// Ergun's way
        {
            float refractIntensity = 1.0;
            float s = logIOR;
            vec3 l = vec3(0, 0, -1);//eye ray
            vec3 temp =  cross (-n, l);
            vec3 Vsurface = cross (temp, -n);
            vec3 refract;
            if (realFresnel){
                float ior = pow(2.0, logIOR);
                float recip_ior = ior;
                refract = -1.0 * vec3(0, 0, 1.0) * recip_ior + n * (n.z * recip_ior - sqrt((n.z * n.z - 1.0) * recip_ior * recip_ior + 1.0));
            } else {
                if (s > 0.0) refract = l * (1.0 - (-s)) + (-n) * (-s);
                if (s < 0.0) refract = l * (1.0 - (s)) + Vsurface * (s);
            }



            vec2 refrCoord = f_texcoord + (refract.xy / refract.z) * (2.0 * BGdis);
            vec4 refrColor = texture2D(uSamplerBackground, refrCoord);
            if (checkFresnel == true)
            {
                refrColor = vec4(0, 0, 0, 1.0);
            }
            return refrColor.rgb * refractIntensity;
        }


        vec3 fresnelBlend(vec3 n, vec3 refl, vec3 refr)
        {
            float cos = dot(n, vec3(0, 0, 1.0));

            // logIOR is the Refraction -> Refraction slider bar: control n.
            float fresnel;

            if (realFresnel){
                float ior = pow(2.0, logIOR);
                float N = ior;
                float sin = sqrt(1.0 - cos * cos);
                float cost = 1.0 - (N * sin) * (N * sin);
                if (cost < 0.){
                    cost = 0.;
                }
                float Rs = (N * cos - cost)/ (N * cos + cost);
                Rs = Rs * Rs;
                float Rp = (N * cost - cos)/ (N * cost + cos);
                Rp = Rp * Rp;
                fresnel = (Rs + Rp)/ 2.0;
            } else {
                float N = (logIOR + 1.0) / 2.0;
                float Amin = 0.02,
                Amax = 0.3;
                float Cmin = 0.4,
                Cmax = 1.0;

                float A = Amin * (1.0 - N) + Amax * N;
                float B = 0.0;
                float C = Cmin * (1.0 - N) + Cmax * N;
                float D = 1.0;

                float num1 = sqrt(1.0 - fresnelB * fresnelB);
                float num2 = sqrt(1.0 - fresnelC * fresnelC);
                // float num1 = fresnelC ;
                // float num2 = fresnelB ;


                float F;
                if (1.0 > cos && cos > num1) {
                    F = (cos - num1) / (1.0 - num1);
                    fresnel = A * F  + B * (1.0 - F);
                } else if (num1 > cos && cos > num2){
                    F = (cos - num2) / (num1 - num2);
                    fresnel = B * F + C * (1.0 - F);
                } else if (num2 > cos && cos > 0.0){
                    F = (cos - 0.0) / (num2 - 0.0);
                    fresnel = C * F + D * (1.0 - F);
                }
            }


            // fresnelIntensiry: Fresnel Control but "fake"
            if (realFresnel){
                return refl * fresnel + refr * (1.0 - fresnel);
            } else {
                if (fresnelIntensity > 0.0){
                    fresnel = 1.0 * fresnelIntensity + fresnel * (1.0 - fresnelIntensity);
                    return refl * fresnel + refr * (1.0 - fresnel);
                } else {
                    fresnel = fresnel * (1.0 + fresnelIntensity);
                    return refl * fresnel + refr * (1.0 - fresnel);
                }
            }




            //vec3 reflTemp = refl * reflectIntensity ;
            //vec3 refrTemp = refr * (1.0 - reflectIntensity);
            //return reflTemp * (1.0 - cos) + refrTemp * cos;


        }

        float sphere(vec3 pe, vec3 npe, vec3 pi, float radius){
            // find roots
            // pi: sphere center

            float b = dot(npe, pi - pe);
            float c = dot(pe - pi, pe-pi) - radius * radius;
            if (c < 0.0){
                // eye in sphere, wrong
                ;
            }
            float delta = b * b - c;
            float th;
            vec4 sphere_color;
            if (b >= 0.0 && delta >= 0.0){
                th = b - sqrt(delta);
                return th;
            } else {
                return 10000.0;
            }
        }

        float plane(vec3 pe, vec3 npe, vec3 pi, vec3 ni){
            if (dot(ni, pi - pe) <= 0.0 && dot(npe, ni) < 0.0){
                float th = dot(ni, pi - pe) / dot(ni, npe);
                return th;
            } else {
                return 10000.0;
            }
        }

        vec3 quadrics_normal(vec3 pe, vec3 npe, vec3 pc, vec3 v2, vec3 vup, float s0, float s1, float s2, float a02, float a12, float a22,
        float a21, float a00, float th) {
            // find roots
            vec3 n0 = normalize(cross(v2, vup));
            vec3 n1 = normalize(cross(v2, n0));
            vec3 n2 = normalize(v2);

            vec3 ph = pe + th * npe;
            vec3 n = normalize(2.0*a02*dot(n0,(ph-pc))/s0/s0*n0+2.0*a12*dot(n1,(ph-pc))/s1/s1*n1+2.0*a22*dot(n2,(ph-pc))/s2/s2*n2+a21/s2*n2);

            return n;

//            if (delta >= 0.0 && -b-sqrt(delta) >= 0.0) {
//                if (abs(a) <= 0.0001 ){
//                    return n2;
//                } else {
//                    th = (-b - sqrt(delta))/2.0/a;
//                    vec3 ph = pe + th * npe;
//                    vec3 n = normalize(2.0*a02*dot(n0,(ph-pc))/s0/s0*n0+2.0*a12*dot(n1,(ph-pc))/s1/s1*n1+2.0*a22*dot(n2,(ph-pc))/s2/s2*n2+a21/s2*n2);
//                    return th;
//                }
//
//            } else{
//                return 10000.0;
//            }

        }

        float quadrics(vec3 pe, vec3 npe, vec3 pc, vec3 v2, vec3 vup, float s0, float s1, float s2, float a02, float a12, float a22,
        float a21, float a00) {
            // find roots
            vec3 n0 = normalize(cross(v2, vup));
            vec3 n1 = normalize(cross(v2, n0));
            vec3 n2 = normalize(v2);

            float a = a02*(dot(n0,npe)/s0)*(dot(n0,npe)/s0) + a12*(dot(n1,npe)/s1)*(dot(n1,npe)/s1) + a22*(dot(n2,npe)/s2)*(dot(n2,npe)/s2);
            float b = 2.0*a02*dot(n0,npe)*dot(n0,(pe-pc))/s0/s0 + 2.0*a12*dot(n1,npe)*dot(n1,(pe-pc))/s1/s1 + 2.0*a22*dot(n2,npe)*dot(n2,(pe-pc))/s2/s2 + a21/s2*dot(n2,npe);
            float c = a02*(dot(n0,(pe-pc))/s0)*(dot(n0,(pe-pc))/s0) + a12*(dot(n1,(pe-pc))/s1)*(dot(n1,(pe-pc))/s1) + a22*(dot(n2,(pe-pc))/s2)*(dot(n2,(pe-pc))/s2) + a21/s2*dot(n2,(pe-pc)) + a00;

            float delta = b * b - 4.0*a*c;
            float th;
            vec4 sphere_color;

            if (delta >= 0.0 && -b-sqrt(delta) >= 0.0) {
                if (abs(a) <= 0.0001 ){
                    th = - c / b;
                    return th;
                } else {
                    th = (-b - sqrt(delta))/2.0/a;
                    vec3 ph = pe + th * npe;
                    vec3 n = normalize(2.0*a02*dot(n0,(ph-pc))/s0/s0*n0+2.0*a12*dot(n1,(ph-pc))/s1/s1*n1+2.0*a22*dot(n2,(ph-pc))/s2/s2*n2+a21/s2*n2);
                    return th;
                }

            } else{
                return 10000.0;
            }

        }

        void main()
        {

            vec4 finalColor;
            vec3 cur_normal;
            vec3 cur_ph;
            finalColor = vec4(0.0, 0.0, 0.0, 1.0);

            vec3 center = vec3(0.0, 0.0, 0.0);
            float pos_costheta = cos(( - mouseXYcamera.x + 0.5) * PI / 2.);
            float pos_cosphi = cos(( mouseXYcamera.y + 0.5) * PI / 2.);
            vec3 pe = cameraDis * vec3(pos_costheta * pos_cosphi, sqrt(1.0 - pos_costheta * pos_costheta) * pos_cosphi, sqrt(1.0 - pos_cosphi * pos_cosphi));

            // pe 是原始的眼睛位置。

            vec3 n2;

            if (centerView) {
                n2 = normalize(center - pe);
            } else {
                float view_costheta = cos(( - mouseXYview.x + 0.5) * 2.0 * PI);
                float view_cosphi = cos( - mouseXYview.y * PI);
                float view_sintheta = sin(( - mouseXYview.x + 0.5) * 2.0 * PI);
                float view_sinphi = sin( - mouseXYview.y * PI);
                n2 = normalize(vec3(view_costheta * view_cosphi, view_sintheta * view_cosphi, view_sinphi));
            }

            vec3 eye_up = vec3(0.0, 0.0, 1.0);
            float tilt_cos = cos(- cameraTilt * PI);
            float tilt_sin = sin(- cameraTilt * PI);
            vec3 n0 = normalize(cross(n2, eye_up));
            n0 = normalize(tilt_cos * n0 + (1. - tilt_cos) * dot(n2, n0) * n2 + tilt_sin * cross(n0, n2));
            vec3 n1 = normalize(cross(n0, n2));

            // image canvas
            float eye_image_distance = 3.0;

            float s0 = 1.0;
            float s1 = 1.4;
            vec3 pc = pe + eye_image_distance * n2;
            vec3 p00 = pc - (s0 * n0 + s1 * n1) / 2.0;
            vec3 pp = p00 + f_texcoord.s * s0 * n0 + f_texcoord.t * s1 * n1;
            vec3 npe = normalize(pp - pe);

            float shortest_th = 10000.0;
            int object_type = -1;

            vec3 v2 = vec3(0., 0., 1.);
            vec3 vup = vec3(1., 0., 0.0);

            // sphere
            int total_spheres = 3;
            int sphere_num = 0;
            mat3 sphere_pi =
            mat3(1.0, 3.0, 0.3,
            2.3, 1.5, 0.5,
            1.3, 2.0, 1.4);
            mat3 sphere_color =
            mat3(1., 0.2, 0.4,
                0.5, 1., 0.,
                0.2, 0.5, 1.);
            mat3 sphere_normal;
            float radius[max_spheres];
            radius[0] = 0.3; radius[1] = 0.2; radius[2] = 0.4;
            float sphere_th[max_spheres];
            for (int i=0; i < max_spheres; i++){
                if (i < total_spheres) {
                    sphere_th[i] = quadrics(pe, npe, sphere_pi[i], v2, vup, radius[i], radius[i], radius[i], 1., 1., 1., 0., -1.);
                    sphere_normal[i] = quadrics_normal(pe, npe, sphere_pi[i], v2, vup, radius[i], radius[i], radius[i], 1., 1., 1., 0., -1., sphere_th[i]);
                    if (sphere_th[i] < shortest_th){
                        shortest_th = sphere_th[i];
                        cur_normal = sphere_normal[i];
                        cur_ph = pe + sphere_th[i] * npe; //算出来的物体表面的位置。
                        object_type = 1;
                        sphere_num = i;
                    }
                }
            }


            // plane
            int total_planes = 3;
            int plane_num = 0;
            mat3 plane_pi = mat3(center, center, center);
            mat3 plane_normal =
            mat3(0., 0., 1.,
                 1., 0., 0.,
                 0., 1., 0.);
            mat3 plane_color =
            mat3(1., 1., 0.,
                 0., 1., 1.,
                 1., 0., 1.);
            float plane_th[max_planes];
            for (int i=0; i < max_planes; i++){
                if (i < total_planes) {
                    plane_th[i] = quadrics(pe, npe, plane_pi[i], plane_normal[i], vup, 1.0, 1.0, 1.0, 0., 0., 0., 1., -0.);
                    if (plane_th[i] < shortest_th){
                        shortest_th = plane_th[i];
                        cur_normal = plane_normal[i];
                        cur_ph = pe + plane_th[i] * npe;
                        object_type = 0;
                        plane_num = i;
                }
                }
            }

            // Quadrics

            float a02 = 1.0;
            float a12 = 1.0;
            float a22 = -1.0;
            float a21 = -0.0;
            float a00 = -1.0;

            vec3 quadrics_pi = vec3(1.0, 1.0, 1.5);
            vec3 quadrics_color = vec3(1.0, 0., 0.);
            v2 = vec3(0., 0., 1.);
            vup = vec3(1., 0., 0.0);
            float quadrics_th = quadrics(pe, npe, quadrics_pi, v2, vup, 0.2, 0.2, 0.5, a02, a12, a22, a21, a00);
            vec3 quadrics_normal = quadrics_normal(pe, npe, quadrics_pi, v2, vup, 0.2, 0.2, 0.5, a02, a12, a22, a21, a00, quadrics_th);
            if (quadrics_th < shortest_th) {
                shortest_th = quadrics_th;
                cur_normal = quadrics_normal;
                cur_ph = pe + quadrics_th * npe;
                object_type = 2;
            }

            vec3 intrinsic_color;

            if (object_type == 0) {
                // plane
                for (int i=0; i < max_planes; i++){
                    if (i == plane_num) {
                        intrinsic_color = plane_color[i];
                    }
                }
            } else if (object_type == 1) {
                // sphere
                for (int i=0; i < max_spheres; i++){
                    if (i == sphere_num) {
                        intrinsic_color = sphere_color[i];
                    }
                }
            } else if (object_type == 2) {
                intrinsic_color = quadrics_color;
            }

            finalColor = diffuse(cur_normal, cur_ph) + vec4(spec(cur_normal, npe, cur_ph), 1.);

            //其实关键就是算出来给出的x,y位置的norm和对应的位置即可。


            float irate = 0.5;
            finalColor.rgb = finalColor.rgb * (1. - irate) + irate * intrinsic_color;

            //又是经典的合成大法。





            gl_FragColor = finalColor;

        }
    </script>

    <script type="text/javascript" src="js/jquery-2.1.4.js"></script>
    <script type="text/javascript" src="resources/webgl-utils.js"></script>
    <script type="text/javascript" src="resources/initShaders.js"></script>
    <script type="text/javascript" src="resources/MV.js"></script>
    <script type="text/javascript" src="resources/ccapture.js-master/build/CCapture.all.min.js"></script>


</head>

<body>
<!--nav-->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <ul class="fancyNav">
        <li><a href=../index.html>Home</a></li>
        <li><a href=../normalmap/index.html>Normal Map</a></li>
        <li><a class="active" href=../3DObjs/index.html>3D Objects</a></li>
        <li><a href=../shadow/index.html>Shadow/Height Map</a></li>
        <li><a href=index.html>Videos</a></li>
        <li><a href=index.html>Research</a></li>
        <li><a href=index.html>Archive</a></li>
        <li style="float:right"><a href="index.html">Placeholder</a></li>
        <li style="float:right"><a href="index.html">Placeholder</a></li>
        <li style="float:right"><a href="index.html">Placeholder</a></li>
        <li style="float:right"><a href=index.html>Placeholder</a></li>
    </ul>
</nav>

<!--content-->
<div class="container-fluid">
    <div class="row row-offcanvas row-offcanvas-left">
        <!--Left Column start-->
        <div class="col-sm-2 sidebar sidebar-left sidebar-offcanvas">

            <div class="main_button_container">

                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Dropdown button
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">

                    <button class="main_button btn btn-block btn-mycustom dropdown-item">Fence</button>

                    <button class="main_button btn btn-block btn-mycustom dropdown-item">EscherSphere</button>

                    <button class="main_button btn btn-block btn-mycustom dropdown-item">Bottle</button>

                    <button class="main_button btn btn-block btn-mycustom dropdown-item">JarTable</button>

                    <button class="main_button btn btn-block btn-mycustom dropdown-item">Picasso Self-Portrait</button>

                    <button class="main_button btn btn-block btn-mycustom dropdown-item">Picasso Dora Maar</button>

                    <button class="main_button btn btn-block btn-mycustom dropdown-item">Modigliani</button>

                    <button class="main_button btn btn-block btn-mycustom dropdown-item">Picasso Self-Portrait Soft
                    </button>

                    <button class="main_button btn btn-block btn-mycustom dropdown-item">Picasso Dora Maar Soft</button>

                    <button class="main_button btn btn-block btn-mycustom dropdown-item">Modigliani Soft</button>

                    <div class="clearfix"></div>
                </div>
            </div>


            <ul class="myAccordion" id="accordion_L">
                <!--Basic Images-->
                <li class="panel">
                    <a class="myControlTitle" data-toggle="collapse" data-parent="#accordion_L" href="#basicImages">
                        Basic Images
                    </a>
                    <div id="basicImages" class="inCollapse collapse in">

                        <div class="imgbox_container">
                            <h6><span title="Insert or DragnDrop bright image here">Bright Image</span></h6>
                            <div>
                                <div id="container2" class="imgThumb_container">
                                    <div class="btn-file">
                                        <input type="file" id="inputFileToLoad2">
                                    </div>
                                    <div id="container2image" class="imgThumb">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="imgbox_container">
                            <h6><span title="Insert or DragnDrop dark image here">Dark Image</span></h6>
                            <div>
                                <div id="container1" class="imgThumb_container">
                                    <div class="btn-file">
                                        <input type="file" id="inputFileToLoad1">
                                    </div>
                                    <div id="container1image" class="imgThumb"></div>
                                </div>
                            </div>
                        </div>
                        <div class="imgbox_container">
                            <h6><span title="Insert or DragnDrop normal image here">Shape Image</span></h6>
                            <div>
                                <div id="container3" class="imgThumb_container">
                                    <div class="btn-file">
                                        <input type="file" id="inputFileToLoad7">
                                    </div>
                                    <div id="container3image" class="imgThumb"></div>
                                </div>
                            </div>
                        </div>
                        <div class="imgbox_container hidden">
                            <h6>Size Image</h6>
                            <div>
                                <div id="container7" class="imgThumb_container">
                                    <div class="btn-file">
                                        <input type="file" id="inputFileToLoad7">
                                    </div>
                                    <div id="container7image" class="imgThumb"></div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h6>Style Control</h6>
                            <div class="slider_box">
                                <input id="styleControl_slider" data-slider-id='customSlider' type="text" class=" span2"
                                       value=""/>
                            </div>
                            <div>
                                <div class="h7 inlineBlock">Bright</div>
                                <div class="h7 pull-right">Dark</div>
                            </div>
                        </div>
                        <div class="checkbox">
                            <label>
                                <span class="h6 inlineBlock">Apply Smooth Step</span>
                                <div class="checkbox_container pull-right">
                                    <input type="checkbox" id="smoothStepSelect">
                                    <div class="pseudoCheckbox"></div>
                                </div>
                            </label>
                        </div>
                    </div>
                </li>

            </ul>
            <div>
                <b>Welcome to Mock3d </b> - a way to create stylistic 3D visualizations using 2d images.
                <ul>
                    <li>Drag and drop a normal image into the "Shape Image" container.</li>
                    <li>Insert images for Dark shading and Bright shading.</li>
                    <li>Add more lights under the Light tab, control light color, intensity and distance.</li>
                    Change light position by dragging with mouse.
                    <li>Insert background image under Refraction tab and control refraction and fresnel using sliders.
                    </li>
                    <li>Insert foreground image under Reflection tab and control reflections using sliders.</li>
                </ul>
            </div>
        </div>
        <!--Left Column end-->
        <!--Main Canvas start-->
        <div class="col-sm-8 main">
            <!--
            <p class="pull-left visible-xs">
               <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Toggle nav</button>
            </p>
            -->
            <!--
           <img src="img/solidColor.jpg" class="img-responsive" alt="our canvas">
           -->
            <div class="canvas_container">
                <canvas id="gl-canvas">
                    Oops ... your browser doesn't support the HTML5 canvas element
                </canvas>

                <svg id="lightPosition_container" xmlns=" http://www.w3.org/2000/svg">


                </svg>

            </div>

        </div>
        <!--Main Canvas end-->

        <!--Right column start-->
        <div class="col-sm-2 sidebar sidebar-right">
            <ul class="myAccordion" id="accordion_R">

                <!-- Camera -->
                <li class="panel">
                    <a class="myControlTitle collapsed" data-toggle="collapse" data-parent="#accordion_R"
                       href="#cameraControl">
                        Camera
                    </a>

                    <div id="cameraControl" class="inCollapse collapse">
                        <div class="checkbox">
                            <label>
                                <span class="h6 inlineBlock">Control Camera Position</span>
                                <div class="checkbox_container pull-right">
                                    <input type="checkbox" id="cameraSelect">
                                    <div class="pseudoCheckbox"></div>
                                </div>
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <span class="h6 inlineBlock">Control Camera View</span>
                                <div class="checkbox_container pull-right">
                                    <input type="checkbox" id="viewSelect">
                                    <div class="pseudoCheckbox"></div>
                                </div>
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <span class="h6 inlineBlock">Apply Center View</span>
                                <div class="checkbox_container pull-right">
                                    <input type="checkbox" id="centerViewSelect">
                                    <div class="pseudoCheckbox"></div>
                                </div>
                            </label>
                        </div>
                        <div class="slider_container">
                            <span class="h6 inlineBlock"> Camera Radius </span>
                            <div class="pull-right">
                                <input type="text" class="form-control mytextbox text-center" id="cameraDis_val">
                            </div>
                            <div class="slider_box">
                                <input id="cameraDis_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>
                        <div class="slider_container">
                            <span class="h6 inlineBlock"> Camera Tilt </span>
                            <div class="pull-right">
                                <input type="text" class="form-control mytextbox text-center" id="cameraTilt_val">
                            </div>
                            <div class="slider_box">
                                <input id="cameraTilt_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>

                        <!-- <div class="slider_container">
                            <span class="h6 inlineBlock"> Translucency </span>
                            <div class="pull-right">
                                   <input type="text" class="form-control mytextbox text-center" id="translucency_val" value="1">
                            </div>
                            <div class="slider_box">
                                   <input id="translucency_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div> -->
                    </div>
                </li>
                <!--Light-->
                <li class="panel">
                    <a class="myControlTitle collapsed" data-toggle="collapse" data-parent="#accordion_R"
                       href="#lightControl">
                        Light
                    </a>
                    <div id="lightControl" class="inCollapse collapse">
                        <div class="checkbox">
                            <label>
                                <span class="h6 inlineBlock">Show Lights Position</span>
                                <div class="checkbox_container pull-right">
                                    <input type="checkbox" id="lightsPositionSelect">
                                    <div class="pseudoCheckbox"></div>
                                </div>
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <span class="h6 inlineBlock">Show Lights Only</span>
                                <div class="checkbox_container pull-right">
                                    <input type="checkbox" id="lightsOnlySelect">
                                    <div class="pseudoCheckbox"></div>
                                </div>
                            </label>
                        </div>


<!--                        <div class="slider_container">-->
<!--                            <span class="h6 inlineBlock"> Reflectiveness (Red mapped) </span>-->
<!--                            <div class="pull-right">-->
<!--                                <input type="text" class="form-control mytextbox text-center" id="alphaInRed_val1">-->
<!--                            </div>-->
<!--                            <div class="slider_box">-->
<!--                                <input id="alphaInRed_slider1" data-slider-id='customSlider' type="text"/>-->
<!--                            </div>-->
<!--                        </div>-->
                        <!-- <div class="btn_container btn-addLight">
                            <input type = "submit" class ="btn btn-default btn-block " value="Add Light">
                        </div> -->
                        <div class="btn_container">
                            <button class="btn btn-block" id="btn_addLight">ADD LIGHT</button>
                        </div>
                        <div class="btn_container">
                            <button class="btn btn-block" id="btn_Bottle">Bottle</button>
                        </div>
                        <div id="lights_container">
                            <ul class="myAccordion" id="accordion_Lights">

                            </ul>
                        </div>
                    </div>
                </li>
                <!--Shadow-->
                <!-- <li class="panel">
                    <a class = "myControlTitle collapsed" data-toggle="collapse" data-parent = "#accordion_R" href="#shadow">Shadow<span class="sr-only">(current)</span></a>
                    <div id = "shadow" class= "inCollapse collapse">
                           <div class="checkbox">
                            <label>
                                <span class = "h6 inlineBlock"> Show Shadow </span>
                                <div class = "checkbox_container pull-right">
                                       <input type="checkbox">
                                    <div class = "pseudoCheckbox"></div>
                                </div>
                            </label>
                        </div>
                        <div class="slider_container">
                            <span class="h6 inlineBlock"> Sample size </span>
                            <div class="pull-right">
                                   <input type="text" class="form-control mytextbox text-center" id="sha_sampleSize_val"    value="1">
                            </div>
                            <div class="slider_box">
                                   <input id="sha_sampleSize_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>
                        <div class="slider_container">
                            <span class="h6 inlineBlock"> Number of Sample </span>
                            <div class="pull-right">
                                   <input type="text" class="form-control mytextbox text-center" id="sha_numberOfSample_val" value="1">
                            </div>
                            <div class="slider_box">
                                   <input id="sha_numberOfSample_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>
                    </div>
                </li> -->
                <!--Additional Alpha Control-->
                <li class="panel">
                    <a class="myControlTitle collapsed" data-toggle="collapse" data-parent="#accordion_R"
                       href="#alphaControl">
                        Diffuse Alpha
                    </a>
                    <div id="alphaControl" class="inCollapse collapse">
                        <div class="imgbox_container">
                            <h6>Alpha Image</h6>
                            <div>
                                <div id="container6" class="imgThumb_container">
                                    <div class="btn-file">
                                        <input type="file" id="inputFileToLoad6">
                                    </div>
                                    <div id="container6image" class="imgThumb"></div>
                                </div>
                            </div>
                        </div>
                        <div class="slider_container">
                            <span class="h6 inlineBlock"> Reflectiveness (Red mapped) </span>
                            <div class="pull-right">
                                <input type="text" class="form-control mytextbox text-center" id="alphaInRed_val">
                            </div>
                            <div class="slider_box">
                                <input id="alphaInRed_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>

                        <div class="slider_container">
                            <span class="h6 inlineBlock"> Transparency (Green mapped) </span>
                            <div class="pull-right">
                                <input type="text" class="form-control mytextbox text-center" id="alphaInGreen_val">
                            </div>
                            <div class="slider_box">
                                <input id="alphaInGreen_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>
                        <div class="slider_container">
                            <span class="h6 inlineBlock"> Fresnel (Blue mapped) </span>
                            <div class="pull-right">
                                <input type="text" class="form-control mytextbox text-center" id="alphaInBlue_val">
                            </div>
                            <div class="slider_box">
                                <input id="alphaInBlue_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>
                    </div>
                </li>
                <!--Refraction-->
                <li class="panel">
                    <a class="myControlTitle collapsed" data-toggle="collapse" data-parent="#accordion_R"
                       href="#refractionControl">
                        Refraction
                    </a>
                    <div id="refractionControl" class="inCollapse collapse">
                        <div class="imgbox_container">
                            <h6>Background image</h6>
                            <div>
                                <div id="container5" class="imgThumb_container">
                                    <div class="btn-file">
                                        <input type="file" id="inputFileToLoad5">
                                    </div>
                                    <div id="container5image" class="imgThumb"></div>
                                </div>
                            </div>
                        </div>
                        <div class="slider_container">
                            <span class="h6 inlineBlock"> Refraction </span>
                            <div class="pull-right">
                                <input type="text" class="form-control mytextbox text-center" id="refraction_val">
                            </div>
                            <div class="slider_box">
                                <input id="refraction_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>
                        <div class="slider_container">
                            <span class="h6 inlineBlock"> BG Distance </span>
                            <div class="pull-right">
                                <input type="text" class="form-control mytextbox text-center" id="refr_BGdis_val">
                            </div>
                            <div class="slider_box">
                                <input id="refr_BGdis_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>
                        <div class="fresnel_container">
                            <div class="fresnelPanel">
                                <div class="myFresnelTitle">
                                    FRESNEL
                                </div>
                                <div class="fresnelBox">
                                    <div class="checkbox">
                                        <label>
                                            <span class="h6 inlineBlock"> Check Fresnel </span>
                                            <div class="checkbox_container pull-right">
                                                <input type="checkbox" id="checkFresnelSelect">
                                                <div class="pseudoCheckbox"></div>
                                            </div>
                                        </label>
                                    </div>
                                    <div class="checkbox">
                                        <label>
                                            <span class="h6 inlineBlock"> Real Fresnel </span>
                                            <div class="checkbox_container pull-right">
                                                <input type="checkbox" id="realFresnelSelect">
                                                <div class="pseudoCheckbox"></div>
                                            </div>
                                        </label>
                                    </div>
                                    <div>
                                        <span class="h6 inlineBlock"> Fresnel Control </span>
                                        <div class="pull-right">
                                            <input type="text" class="form-control mytextbox text-center"
                                                   id="fresnel_intensity_val">
                                        </div>
                                        <div class="slider_box">
                                            <input id="fresnel_intensity_slider" data-slider-id='customSlider'
                                                   type="text"/>
                                        </div>
                                        <div>
                                            <div class="h7 inlineBlock">Full Refract</div>
                                            <div class="h7 pull-right">Full Reflect</div>
                                        </div>
                                    </div>
                                    <div>
                                        <h6>Fresnel Position</h6>
                                        <div class="slider_box">
                                            <input id="fresnelControl_slider" data-slider-id='customSlider' type="text"
                                                   class=" span2" value=""/>
                                        </div>
                                        <div>
                                            <div class="h7 inlineBlock">Center</div>
                                            <div class="h7 pull-right">Edge</div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <!-- <div class="slider_container">
                            <span class="h6 inlineBlock"> Translucency </span>
                            <div class="pull-right">
                                   <input type="text" class="form-control mytextbox text-center" id="translucency_val" value="1">
                            </div>
                            <div class="slider_box">
                                   <input id="translucency_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div> -->
                    </div>
                </li>
                <!--Reflection-->
                <li class="panel">
                    <a class="myControlTitle collapsed" data-toggle="collapse" data-parent="#accordion_R"
                       href="#reflectionControl">
                        Reflection
                    </a>
                    <div id="reflectionControl" class="inCollapse collapse">
                        <div class="imgbox_container">
                            <h6>Foreground image</h6>
                            <div>
                                <div id="container4" class="imgThumb_container">
                                    <div class="btn-file">
                                        <input type="file" id="inputFileToLoad4">
                                    </div>
                                    <div id="container4image" class="imgThumb"></div>
                                </div>
                            </div>
                        </div>
                        <div class="dropdown_container">
                            <span class="h6 inlineBlock"> Map as </span>
                            <div class="pull-right">
                                <div class="btn-group" id="reflMap">
                                    <button type="button" class="btn btn-default dropdown-toggle myDropdown"
                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu dropdown-menu-right">
                                        <li><a id="reflMap_plane">Plane</a></li>
                                        <li><a id="reflMap_hemisphere">Hemisphere</a></li>
                                    </ul>
                                </div>
                            </div>

                        </div>

                        <div class="slider_container">
                            <span class="h6 inlineBlock"> Shift X</span>
                            <div class="pull-right">
                                <input type="text" class="form-control mytextbox text-center" id="refl_FGshiftX_val">
                            </div>
                            <div class="slider_box">
                                <input id="refl_FGshiftX_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>
                        <div class="slider_container">
                            <span class="h6 inlineBlock"> Shift Y</span>
                            <div class="pull-right">
                                <input type="text" class="form-control mytextbox text-center" id="refl_FGshiftY_val">
                            </div>
                            <div class="slider_box">
                                <input id="refl_FGshiftY_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>
                        <div class="slider_container">
                            <span class="h6 inlineBlock"> Scale X</span>
                            <div class="pull-right">
                                <input type="text" class="form-control mytextbox text-center" id="refl_FGscaleX_val">
                            </div>
                            <div class="slider_box">
                                <input id="refl_FGscaleX_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>
                        <div class="slider_container">
                            <span class="h6 inlineBlock"> Scale Y</span>
                            <div class="pull-right">
                                <input type="text" class="form-control mytextbox text-center" id="refl_FGscaleY_val">
                            </div>
                            <div class="slider_box">
                                <input id="refl_FGscaleY_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>
                        <div class="slider_container">
                            <span class="h6 inlineBlock"> FG Distance </span>
                            <div class="pull-right">
                                <input type="text" class="form-control mytextbox text-center" id="refl_FGdis_val">
                            </div>
                            <div class="slider_box">
                                <input id="refl_FGdis_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>
                        <div class="checkbox">
                            <label>
                                <span class="h6 inlineBlock">Transpose Image</span>
                                <div class="checkbox_container pull-right">
                                    <input type="checkbox" id="transposeImageSelect">
                                    <div class="pseudoCheckbox"></div>
                                </div>
                            </label>
                        </div>
                        <!-- <div class="slider_container">
                            <span class="h6 inlineBlock"> Bluriness </span>
                            <div class="pull-right">
                                   <input type="text" class="form-control mytextbox text-center" id="bluriness_val"    value="1">
                            </div>
                            <div class="slider_box">
                                   <input id="bluriness_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div> -->
                    </div>
                </li>
                <!--Ambient Occlusion-->
                <!-- <li class="panel">
                    <a class = "myControlTitle collapsed" data-toggle="collapse" data-parent = "#accordion_R" href="#aoControl">
                        Ambient Occlusion
                    </a>
                    <div id = "aoControl" class= "inCollapse collapse">
                        <div class="checkbox">
                            <label>
                                <span class = "h6 inlineBlock"> Show Ambient </span>
                                <div class = "checkbox_container pull-right">
                                    <input type="checkbox">
                                    <div class = "pseudoCheckbox"></div>
                                </div>
                            </label>
                        </div>
                        <div class="slider_container">
                            <span class="h6 inlineBlock"> Sample size </span>
                            <div class="pull-right">
                                <input type="text" class="form-control mytextbox text-center" id="amb_sampleSize_val"    value="1">
                            </div>
                            <div class="slider_box">
                                <input id="amb_sampleSize_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>
                        <div class="slider_container">
                            <span class="h6 inlineBlock"> Number of Sample </span>
                            <div class="pull-right">
                                <input type="text" class="form-control mytextbox text-center" id="amb_numberOfSample_val" value="1">
                            </div>
                            <div class="slider_box">
                                <input id="amb_numberOfSample_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>
                    </div>
                </li> -->
                <!--Quality-->
                <!-- <li class="panel">
                    <a class="myControlTitle collapsed" data-toggle="collapse" data-parent = "#accordion_R" href=" #qualityControl">
                        Quality
                    </a>
                    <div id = "qualityControl" class= "inCollapse collapse">
                           <div class="slider_container">
                            <span class="h6 inlineBlock"> Shape Map Quality </span>
                            <div class="pull-right">
                                   <input type="text" class="form-control mytextbox text-center" id="smQuality_val"    value="1">
                            </div>
                            <div class="slider_box">
                                   <input id="smQuality_slider" data-slider-id='customSlider' type="text"/>
                            </div>
                        </div>
                   </div>
                </li> -->
            </ul>
        </div>
        <!--Right column end-->
    </div>
</div>


<!-- light templete -->
<script type="text/template" data-template="light">
    <li class="panel" data-id="{{id}}" id="lightPanel{{id}}">
        <a class="myControlTitle myLightsTitle collapsed" data-toggle="collapse" data-parent="#accordion_Lights"
           href="#light{{id}}">
            <div class="destroy"></div>
            LIGHT{{id}}
        </a>
        <div id="light{{id}}" class="lightBox inCollapse collapse">
            <div class="checkbox">
                <label>
                    <span class="h6 inlineBlock">Diffuse</span>
                    <div class="checkbox_container pull-right">
                        <input type="checkbox" id="diffuseSelect">
                        <div class="pseudoCheckbox"></div>
                    </div>
                </label>
            </div>
            <div class="checkbox">
                <label>
                    <span class="h6 inlineBlock">Specular</span>
                    <div class="checkbox_container pull-right">
                        <input type="checkbox" id="specSelect">
                        <div class="pseudoCheckbox"></div>
                    </div>
                </label>
            </div>
            <div>
                <span class="h6 inlineBlock"> Color </span>
                <div class="pull-right">
                    <input class="colorPicker" type="hidden">
                </div>
            </div>
            <div class="slider_container">
                <span class="h6 inlineBlock"> Intensity </span>
                <div class="pull-right">
                    <input type="text" class="form-control mytextbox text-center" id="intensity_val">
                </div>
                <div class="slider_box">
                    <input id="intensity_slider" data-slider-id='customSlider' type="text"/>
                </div>
            </div>
            <div class="slider_container">
                <span class="h6 inlineBlock"> Light Distance </span>
                <div class="pull-right">
                    <input type="text" class="form-control mytextbox text-center" id="pointLGTdis_val">
                </div>
                <div class="slider_box">
                    <input id="pointLGTdis_slider" data-slider-id='customSlider' type="text"/>
                </div>
            </div>
            <div class="slider_container">
                <span class="h6 inlineBlock"> Light Decay </span>
                <div class="pull-right">
                    <input type="text" class="form-control mytextbox text-center" id="pointLGTdecay_val">
                </div>
                <div class="slider_box">
                    <input id="pointLGTdecay_slider" data-slider-id='customSlider' type="text"/>
                </div>
            </div>

        </div>
    </li>

</script>

<!-- Bootstrap core JavaScript  ================================================== -->
<script src="js/bootstrap.min.js"></script>
<script src="js/bootstrap-slider.js"></script>

<!--colorpicker-->
<script src="js/jquery.minicolors.min.js"></script>

<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="js/ie10-viewport-bug-workaround.js"></script>

<!-- More -->
<script type="text/javascript" src="dragndrop.js"></script>
<script type="text/javascript" src="cube.js"></script>
<script type="text/javascript" src="sliders.js"></script>
<script type="text/javascript" src="addLight.js"></script>

</body>
</html>

